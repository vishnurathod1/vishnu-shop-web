<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Search - VSV ShopEasy</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="search-enhancements.css">
    <style>
        .search-page-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .search-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .search-filters {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .filter-group select, .filter-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .search-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .search-result-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            transition: transform 0.3s;
            background: white;
        }
        
        .search-result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .search-result-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 4px;
        }
        
        .search-result-card h3 {
            margin: 10px 0;
            font-size: 18px;
        }
        
        .search-result-card .price {
            font-size: 20px;
            color: #007bff;
            font-weight: bold;
        }
        
        .search-result-card .original-price {
            text-decoration: line-through;
            color: #999;
            margin-left: 10px;
        }
        
        .search-result-card .badge {
            background: #ff4757;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            margin-left: 5px;
        }
        
        .category-result {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 30px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .category-result:hover {
            transform: scale(1.05);
        }
        
        .category-result i {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .no-results {
            text-align: center;
            padding: 60px;
            color: #666;
        }
        
        .search-stats {
            margin-bottom: 20px;
            color: #666;
        }
        
        .search-suggestions {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .search-suggestions h4 {
            margin-bottom: 10px;
        }
        
        .suggestion-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .suggestion-tag {
            background: #007bff;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .suggestion-tag:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <div class="nav-container">
                <div class="logo">
                    <h1>VSV Shop Easy</h1>
                </div>
                <div class="nav-menu">
                    <a href="homepage.html">Home</a>
                    <a href="categories.html">Categories</a>
                    <a href="deals.html">Deals</a>
                    <a href="new-arrivals.html">New Arrivals</a>
                </div>
            </div>
        </nav>
    </header>

    <div class="search-page-container">
        <div class="search-header">
            <h1>Search Products & Categories</h1>
            <p>Find exactly what you're looking for across all our categories</p>
        </div>

        <div class="search-container">
            <input type="text" id="search-input" placeholder="Search products, categories, brands..." class="search-input">
            <button id="search-btn" class="search-btn">
                <i class="fas fa-search"></i> Search
            </button>
        </div>

        <div class="search-filters">
            <div class="filter-group">
                <label for="category-filter">Category</label>
                <select id="category-filter">
                    <option value="all">All Categories</option>
                    <option value="electronics">Electronics</option>
                    <option value="fashion">Fashion</option>
                    <option value="footwear">Footwear</option>
                    <option value="beauty">Beauty</option>
                    <option value="home">Home & Decor</option>
                    <option value="health">Health & Personal Care</option>
                    <option value="books">Books & Media</option>
                    <option value="sports">Sports</option>
                    <option value="toys">Kids Toys</option>
                    <option value="groceries">Groceries</option>
                    <option value="accessories">Accessories</option>
                    <option value="luggage">Luggage</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="price-filter">Price Range</label>
                <select id="price-filter">
                    <option value="all">All Prices</option>
                    <option value="0-1000">Under ₹1,000</option>
                    <option value="1000-5000">₹1,000 - ₹5,000</option>
                    <option value="5000-10000">₹5,000 - ₹10,000</option>
                    <option value="10000-50000">₹10,000 - ₹50,000</option>
                    <option value="50000+">₹50,000+</option>
                </select>
            </div>

            <div class="filter-group">
                <label for="sort-filter">Sort By</label>
                <select id="sort-filter">
                    <option value="relevance">Relevance</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="rating">Customer Rating</option>
                    <option value="newest">Newest First</option>
                </select>
            </div>
        </div>

        <div class="search-stats" id="search-stats"></div>
        
        <div class="search-results-grid" id="search-results">
            <!-- Results will be populated here -->
        </div>

        <div class="search-suggestions" id="search-suggestions" style="display: none;">
            <h4>Popular Searches</h4>
            <div class="suggestion-tags">
                <span class="suggestion-tag" onclick="performSearch('wireless headphones')">wireless headphones</span>
                <span class="suggestion-tag" onclick="performSearch('smart watch')">smart watch</span>
                <span class="suggestion-tag" onclick="performSearch('running shoes')">running shoes</span>
                <span class="suggestion-tag" onclick="performSearch('gaming laptop')">gaming laptop</span>
                <span class="suggestion-tag" onclick="performSearch('yoga mat')">yoga mat</span>
                <span class="suggestion-tag" onclick="performSearch('coffee maker')">coffee maker</span>
                <span class="suggestion-tag" onclick="performSearch('skincare')">skincare</span>
                <span class="suggestion-tag" onclick="performSearch('books')">books</span>
            </div>
        </div>
    </div>

    <script src="search-system-complete.js"></script>
    <script>
        let searchInstance;
        let currentResults = [];

        // Initialize search
        document.addEventListener('DOMContentLoaded', async () => {
            searchInstance = new EcommerceSearch();
            await searchInstance.init();
            
            // Set up event listeners
            setupEventListeners();
            
            // Show all products initially
            displayResults(searchInstance.getAllProducts());
            
            // Show suggestions
            document.getElementById('search-suggestions').style.display = 'block';
        });

        function setupEventListeners() {
            const searchInput = document.getElementById('search-input');
            const searchBtn = document.getElementById('search-btn');
            const categoryFilter = document.getElementById('category-filter');
            const priceFilter = document.getElementById('price-filter');
            const sortFilter = document.getElementById('sort-filter');

            let searchTimeout;
            
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    performSearch(e.target.value);
                }, 300);
            });

            searchBtn.addEventListener('click', () => {
                performSearch(searchInput.value);
            });

            categoryFilter.addEventListener('change', applyFilters);
            priceFilter.addEventListener('change', applyFilters);
            sortFilter.addEventListener('change', applyFilters);

            // Enter key support
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch(e.target.value);
                }
            });
        }

        function performSearch(query) {
            const filters = {
                category: document.getElementById('category-filter').value,
                priceRange: document.getElementById('price-filter').value,
                sort: document.getElementById('sort-filter').value
            };

            currentResults = searchInstance.search(query, filters);
            displayResults(currentResults);
            
            // Update search stats
            updateSearchStats(query, currentResults);
            
            // Hide suggestions when searching
            if (query && query.trim() !== '') {
                document.getElementById('search-suggestions').style.display = 'none';
            } else {
                document.getElementById('search-suggestions').style.display = 'block';
            }
        }

        function applyFilters() {
            const query = document.getElementById('search-input').value;
            performSearch(query);
        }

        function displayResults(results) {
            const resultsContainer = document.getElementById('search-results');
            
            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-search" style="font-size: 48px; color: #ddd;"></i>
                        <h3>No results found</h3>
                        <p>Try adjusting your search terms or filters</p>
                    </div>
                `;
                return;
            }

            // Separate categories and products
            const categories = results.filter(r => r.type === 'category');
            const products = results.filter(r => r.type === 'product');

            let html = '';

            // Display categories first
            if (categories.length > 0) {
                html += '<h3>Categories</h3>';
                html += '<div class="search-results-grid">';
                categories.forEach(result => {
                    html += `
                        <div class="category-result" onclick="window.location.href='${result.data.url}'">
                            <i class="fas ${result.data.icon}"></i>
                            <h3>${result.data.name}</h3>
                            <p>${result.data.count} products</p>
                        </div>
                    `;
                });
                html += '</div>';
            }

            // Display products
            if (products.length > 0) {
                if (categories.length > 0) {
                    html += '<h3 style="margin-top: 40px;">Products</h3>';
                }
                html += '<div class="search-results-grid">';
                products.forEach(result => {
                    const product = result.data;
                    html += `
                        <div class="search-result-card">
                            <img src="${product.image}" alt="${product.name}">
                            <h3>${product.name}</h3>
                            <div class="price">
                                ₹${product.price}
                                ${product.originalPrice ? `<span class="original-price">₹${product.originalPrice}</span>` : ''}
                                ${product.badge ? `<span class="badge">${product.badge}</span>` : ''}
                            </div>
                            <div style="margin: 10px 0;">
                                <span>⭐ ${product.rating}</span>
                                <span style="margin-left: 10px;">(${product.reviews} reviews)</span>
                            </div>
                            <button class="btn btn-primary" onclick="addToCart(${product.id})">
                                <i class="fas fa-shopping-cart"></i> Add to Cart
                            </button>
                        </div>
                    `;
                });
                html += '</div>';
            }

            resultsContainer.innerHTML = html;
        }

        function updateSearchStats(query, results) {
            const statsContainer = document.getElementById('search-stats');
            const totalProducts = results.filter(r => r.type === 'product').length;
            const totalCategories = results.filter(r => r.type === 'category').length;

            if (query && query.trim() !== '') {
                statsContainer.innerHTML = `
                    Found ${totalProducts} products and ${totalCategories} categories for "${query}"
                `;
            } else {
                statsContainer.innerHTML = `
                    Showing all ${totalProducts} products across ${totalCategories} categories
                `;
            }
        }

        function addToCart(productId) {
            // Implement add to cart functionality
            alert(`Product ${productId} added to cart!`);
        }
    </script>
</body>
</html>
