<!DOCTYPE html>
<html>
<head>
  <title>Enhanced Inventory - VSV Easy Shop</title>
  <link rel="stylesheet" href="inventory-styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<!-- Header -->
<header class="inventory-header">
  <h1>üì¶ Inventory Management</h1>
  <p class="inventory-subtitle">Manage your products, track stock levels, and optimize your inventory</p>
</header>

<!-- Statistics Dashboard -->
<div class="stats-grid">
  <div class="stat-card">
    <h3 id="totalProducts">0</h3>
    <p>Total Products</p>
  </div>
  <div class="stat-card">
    <h3 id="totalValue">‚Çπ0</h3>
    <p>Total Value</p>
  </div>
  <div class="stat-card">
    <h3 id="lowStockItems">0</h3>
    <p>Low Stock Items</p>
  </div>
  <div class="stat-card">
    <h3 id="outOfStock">0</h3>
    <p>Out of Stock</p>
  </div>
</div>

<!-- Controls Section -->
<div class="inventory-controls">
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search products..." onkeyup="searchProducts()">
  </div>
  <div class="action-buttons">
    <select id="categoryFilter" onchange="filterByCategory()">
      <option value="all">All Categories</option>
      <option value="electronics">Electronics</option>
      <option value="fashion">Fashion</option>
      <option value="sports">Sports</option>
      <option value="home">Home</option>
      <option value="beauty">Beauty</option>
      <option value="books">Books</option>
    </select>
    <button class="btn btn-primary" onclick="showAddForm()">Add New Product</button>
    <button class="btn btn-secondary" onclick="exportToCSV()">Export CSV</button>
  </div>
</div>

<!-- Add/Edit Product Form -->
<div id="productForm" class="inventory-form" style="display: none;">
  <h3 id="formTitle">Add New Product</h3>
  <div class="form-grid">
    <div class="form-group">
      <label>Product Name</label>
      <input type="text" id="formName" required>
    </div>
    <div class="form-group">
      <label>Category</label>
      <select id="formCategory">
        <option value="electronics">Electronics</option>
        <option value="fashion">Fashion</option>
        <option value="sports">Sports</option>
        <option value="home">Home</option>
        <option value="beauty">Beauty</option>
        <option value="books">Books</option>
      </select>
    </div>
    <div class="form-group">
      <label>Price (‚Çπ)</label>
      <input type="number" id="formPrice" min="0" required>
    </div>
    <div class="form-group">
      <label>Original Price (‚Çπ)</label>
      <input type="number" id="formOriginalPrice" min="0">
    </div>
    <div class="form-group">
      <label>Stock Quantity</label>
      <input type="number" id="formStock" min="0" required>
    </div>
    <div class="form-group">
      <label>Image URL</label>
      <input type="url" id="formImage" placeholder="https://example.com/image.jpg">
    </div>
    <div class="form-group">
      <label>Rating (1-5)</label>
      <input type="number" id="formRating" min="1" max="5" step="0.1">
    </div>
    <div class="form-group">
      <label>Badge</label>
      <select id="formBadge">
        <option value="">None</option>
        <option value="New">New</option>
        <option value="Sale">Sale</option>
        <option value="Hot">Hot</option>
      </select>
    </div>
  </div>
  <div style="margin-top: 1rem;">
    <button class="btn btn-primary" onclick="saveProduct()">Save Product</button>
    <button class="btn btn-secondary" onclick="cancelForm()">Cancel</button>
  </div>
</div>

<!-- Inventory Table -->
<div class="inventory-table-container">
  <table class="inventory-table">
    <thead>
      <tr>
        <th>Product</th>
        <th>Category</th>
        <th>Price</th>
        <th>Stock</th>
        <th>Status</th>
        <th>Rating</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="inventoryTableBody">
    </tbody>
  </table>
</div>

<script>
// Enhanced inventory data with real products
let inventory = [
  {
    id: 1,
    name: "Wireless Headphones",
    category: "electronics",
    price: 2999,
    originalPrice: 4999,
    stock: 45,
    image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=300",
    rating: 4.5,
    reviews: 128,
    badge: "New"
  },
  {
    id: 2,
    name: "Smart Watch",
    category: "electronics",
    price: 7999,
    originalPrice: 12999,
    stock: 32,
    image: "https://images.unsplash.com/photo-1546868871-7041f2a55e12?w=300",
    rating: 4.2,
    reviews: 89,
    badge: "Sale"
  },
  {
    id: 3,
    name: "Running Shoes",
    category: "fashion",
    price: 3499,
    originalPrice: 5499,
    stock: 67,
    image: "https://images.unsplash.com/photo-1491553895911-0055eca6402d?w=300",
    rating: 4.8,
    reviews: 256,
    badge: null
  },
  {
    id: 4,
    name: "Gaming Laptop",
    category: "electronics",
    price: 59999,
    originalPrice: 79999,
    stock: 12,
    image: "https://images.unsplash.com/photo-1593642632823-8f785ba67e45?w=300",
    rating: 4.7,
    reviews: 342,
    badge: "Hot"
  },
  {
    id: 5,
    name: "Yoga Mat",
    category: "sports",
    price: 899,
    originalPrice: 1299,
    stock: 78,
    image: "https://images.unsplash.com/photo-1518611012118-696072aa579a?w=300",
    rating: 4.3,
    reviews: 78,
    badge: "New"
  },
  {
    id: 6,
    name: "Coffee Maker",
    category: "home",
    price: 2499,
    originalPrice: 3999,
    stock: 23,
    image: "https://images.unsplash.com/photo-1517668808426-b7f4adc21235?w=300",
    rating: 4.4,
    reviews: 156,
    badge: "Sale"
  },
  {
    id: 7,
    name: "Skincare Set",
    category: "beauty",
    price: 1899,
    originalPrice: 2499,
    stock: 56,
    image: "https://images.unsplash.com/photo-1596462502278-27bfdc403543?w=300",
    rating: 4.6,
    reviews: 203,
    badge: null
  },
  {
    id: 8,
    name: "Mystery Novel",
    category: "books",
    price: 399,
    originalPrice: 599,
    stock: 89,
    image: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=300",
    rating: 4.9,
    reviews: 92,
    badge: "New"
  },
  {
    id: 9,
    name: "Bluetooth Speaker",
    category: "electronics",
    price: 3999,
    originalPrice: 5999,
    stock: 34,
    image: "https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=300",
    rating: 4.5,
    reviews: 89,
    badge: "New"
  },
  {
    id: 10,
    name: "Winter Jacket",
    category: "fashion",
    price: 4499,
    originalPrice: 6999,
    stock: 19,
    image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?w=300",
    rating: 4.6,
    reviews: 167,
    badge: "Sale"
  }
];

let editingIndex = -1;
let filteredInventory = [...inventory];

// Initialize
renderTable();
updateStats();

// Statistics Dashboard
function updateStats() {
  const totalProducts = inventory.length;
  const totalValue = inventory.reduce((sum, item) => sum + (item.price * item.stock), 0);
  const lowStockItems = inventory.filter(item => item.stock <= 10).length;
  const outOfStock = inventory.filter(item => item.stock === 0).length;

  document.getElementById('totalProducts').textContent = totalProducts;
  document.getElementById('totalValue').textContent = `‚Çπ${totalValue.toLocaleString()}`;
  document.getElementById('lowStockItems').textContent = lowStockItems;
  document.getElementById('outOfStock').textContent = outOfStock;
}

// Render table
function renderTable() {
  const tbody = document.getElementById('inventoryTableBody');
  tbody.innerHTML = '';

  filteredInventory.forEach((item, index) => {
    const originalIndex = inventory.indexOf(item);
    const status = getStockStatus(item.stock);
    const row = document.createElement('tr');
    
    row.innerHTML = `
      <td>
        <div class="product-info">
          <img src="${item.image}" alt="${item.name}" class="product-image" onerror="this.src='https://via.placeholder.com/50x50'">
          <div class="product-details">
            <h4>${item.name}</h4>
            <p>${item.badge ? `<span class="category-badge">${item.badge}</span>` : ''}</p>
          </div>
        </div>
      </td>
      <td><span class="category-badge">${item.category}</span></td>
      <td>
        <div class="price">
          ‚Çπ${item.price}
          ${item.originalPrice > item.price ? `<br><small style="text-decoration: line-through; color: var(--text-secondary);">‚Çπ${item.originalPrice}</small>` : ''}
        </div>
      </td>
      <td>
        <div class="stock-status">
          <span class="stock-indicator ${getStockClass(item.stock)}"></span>
          <span class="stock-count">${item.stock}</span>
        </div>
      </td>
      <td>${status}</td>
      <td>
        <div style="display: flex; align-items: center; gap: 0.25rem;">
          <span>‚≠ê ${item.rating}</span>
          <small style="color: var(--text-secondary);">(${item.reviews})</small>
        </div>
      </td>
      <td>
        <div class="action-cell">
          <button class="btn btn-primary" onclick="editProduct(${originalIndex})">Edit</button>
          <button class="btn btn-danger" onclick="deleteProduct(${originalIndex})">Delete</button>
        </div>
      </td>
    `;
    
    tbody.appendChild(row);
  });
}

// Stock status functions
function getStockStatus(stock) {
  if (stock === 0) return 'Out of Stock';
  if (stock <= 5) return 'Critical';
  if (stock <= 10) return 'Low Stock';
  return 'In Stock';
}

function getStockClass(stock) {
  if (stock === 0) return 'stock-low';
  if (stock <= 5) return 'stock-low';
  if (stock <= 10) return 'stock-medium';
  return 'stock-high';
}

// Search functionality
function searchProducts() {
  const searchTerm = document.getElementById('searchInput').value.toLowerCase();
  const categoryFilter = document.getElementById('categoryFilter').value;
  
  filteredInventory = inventory.filter(item => {
    const matchesSearch = item.name.toLowerCase().includes(searchTerm) || 
                         item.category.toLowerCase().includes(searchTerm);
    const matchesCategory = categoryFilter === 'all' || item.category === categoryFilter;
    return matchesSearch && matchesCategory;
  });
  
  renderTable();
}

// Filter by category
function filterByCategory() {
  searchProducts();
}

// Form functions
function showAddForm() {
  document.getElementById('formTitle').textContent = 'Add New Product';
  document.getElementById('productForm').style.display = 'block';
  clearForm();
  editingIndex = -1;
}

function editProduct(index) {
  const product = inventory[index];
  editingIndex = index;
  
  document.getElementById('formTitle').textContent = 'Edit Product';
  document.getElementById('formName').value = product.name;
  document.getElementById('formCategory').value = product.category;
  document.getElementById('formPrice').value = product.price;
  document.getElementById('formOriginalPrice').value = product.originalPrice || '';
  document.getElementById('formStock').value = product.stock;
  document.getElementById('formImage').value = product.image || '';
  document.getElementById('formRating').value = product.rating || '';
  document.getElementById('formBadge').value = product.badge || '';
  
  document.getElementById('productForm').style.display = 'block';
}

function saveProduct() {
  const name = document.getElementById('formName').value;
  const category = document.getElementById('formCategory').value;
  const price = parseFloat(document.getElementById('formPrice').value);
  const originalPrice = parseFloat(document.getElementById('formOriginalPrice').value) || price;
  const stock = parseInt(document.getElementById('formStock').value);
  const image = document.getElementById('formImage').value;
  const rating = parseFloat(document.getElementById('formRating').value) || 0;
  const badge = document.getElementById('formBadge').value;

  if (!name || !category || !price || !stock) {
    alert('Please fill in all required fields!');
    return;
  }

  const product = {
    id: editingIndex >= 0 ? inventory[editingIndex].id : Date.now(),
    name,
    category,
    price,
    originalPrice,
    stock,
    image,
    rating,
    reviews: editingIndex >= 0 ? inventory[editingIndex].reviews : 0,
    badge
  };

  if (editingIndex >= 0) {
    inventory[editingIndex] = product;
  } else {
    inventory.push(product);
  }

  filteredInventory = [...inventory];
  renderTable();
  updateStats();
  cancelForm();
}

function deleteProduct(index) {
  if (confirm('Are you sure you want to delete this product?')) {
    inventory.splice(index, 1);
    filteredInventory = [...inventory];
    renderTable();
    updateStats();
  }
}

function cancelForm() {
  document.getElementById('productForm').style.display = 'none';
  clearForm();
}

function clearForm() {
  document.getElementById('formName').value = '';
  document.getElementById('formCategory').value = 'electronics';
  document.getElementById('formPrice').value = '';
  document.getElementById('formOriginalPrice').value = '';
  document.getElementById('formStock').value = '';
  document.getElementById('formImage').value = '';
  document.getElementById('formRating').value = '';
  document.getElementById('formBadge').value = '';
}

// Export to CSV
function exportToCSV() {
  const csvContent = "data:text/csv;charset=utf-8," 
    + "Product Name,Category,Price,Original Price,Stock,Rating,Reviews,Badge\n"
    + inventory.map(item => 
      `${item.name},${item.category},${item.price},${item.originalPrice || ''},${item.stock},${item.rating},${item.reviews},${item.badge || ''}`
    ).join("\n");
  
  const encodedUri = encodeURI(csvContent);
  const link = document.createElement("a");
  link.setAttribute("href", encodedUri);
  link.setAttribute("download", "inventory.csv");
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}

// Initialize
renderTable();
updateStats();
</script>

</body>
</html>
